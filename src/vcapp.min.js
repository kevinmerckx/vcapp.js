"use strict";var WebApp={app:void 0,apps:{},viewControllers:{}};WebApp.registerApp=function(e,o,n){this.apps[e]={maker:o,options:n}},WebApp.registerViewController=function(e,o,n){this.viewControllers[e]={maker:o,options:n}},WebApp.createViewController=function(e,o){if(this.viewControllers[e]){var n={};for(var t in this.viewControllers[e].options)n[t]=this.viewControllers[e].options[t];for(var t in o)n[t]=o[t];return this.viewControllers[e].maker(n)}},WebApp.makeApplication=function(e,o){o=o||{},e=e||{};var n;return o.willLaunch=e.willLaunch||function(){},o.didLaunch=e.didLaunch||function(){},o.launch=function(){o.willLaunch(),o.setRootViewController(e.rootViewController&&WebApp.viewControllers[e.rootViewController]?WebApp.createViewController(e.rootViewController):new WebApp.ViewController),o.didLaunch()},o.getRootViewController=function(){return n},o.setRootViewController=function(e){n&&n.unloadView(),n=e,e&&e.willAppear(),e.loadView(document.querySelector("body"),function(){e&&e.didAppear()})},o},WebApp.makeViewController=function(e,o){return o=o||{},o.options=e||{},o.willLoad=o.options.willLoad||function(){},o.didLoad=o.options.didLoad||function(){},o.willAppear=o.options.willAppear||function(){},o.didAppear=o.options.didAppear||function(){},o.willUnload=o.options.willUnload||function(){},o.didUnload=o.options.didUnload||function(){},o.element=void 0,o.uiElements={},o.isLoaded=!1,o.loadView=function(e,n){o.element=e,o.willLoad(),o.options.template?WebApp.loadTemplate(o.options.template).into(o.element,function(){o.isLoaded=!0,Array.prototype.slice.call(o.element.querySelectorAll("*[id]")).forEach(function(e){o.uiElements[e.getAttribute("id")]=e}),n&&n(),o.didLoad()}):o.didLoad()},o.unloadView=function(e){o.isLoaded=!1,o.willUnload(),o.element.remove(),e&&e(),o.didUnload()},o},WebApp.makeTabsViewController=function(e,o){o=WebApp.makeViewController(e,o),o.willSelect=e.willSelect||function(){},o.didSelect=e.didSelect||function(){},o.willUnselect=e.willUnselect||function(){},o.didUnselect=e.didUnselect||function(){},o.contentElement=void 0,o.tabs=[],o.selected=-1;var n=o.loadView;return o.loadView=function(e){n.call(o,e,function(){o.contentElement=o.element.querySelector("view"),o.element.forEach("tabs tab",function(e){o.tabs.push({label:e.getAttribute("label"),icon:e.getAttribute("icon"),viewController:WebApp.createViewController(e.getAttribute("root")),container:document.createElement("div"),isLoaded:!1})}),o.element.forEach("tabs",function(e){e.remove()})})},o.select=function(e){0>e&&e>=o.tabs.length&&e!=o.selected||(o.selected>=0&&o.willUnselect(o.selected),o.willSelect(e),o.tabs[e].viewController.willAppear(),o.tabs[e].isLoaded||(o.contentElement.appendChild(o.tabs[e].container),o.tabs[e].viewController.loadView(o.tabs[e].container),o.tabs[e].isLoaded=!0),o.selected>=0&&o.didUnselect(o.selected),o.selected=e,o.didSelect(e),o.tabs[e].viewController.didAppear())},o},WebApp.makeNavigationViewController=function(e,o){o=WebApp.makeViewController(e,o),o.timeBeforeUnloadingView=o.options.timeBeforeUnloadingView||100,o.willChangeTop=o.options.willChangeTop||function(){},o.didChangeTop=o.options.didChangeTop||function(){},o.willPush=o.options.willPush||function(){},o.didPush=o.options.didPush||function(){},o.willPop=o.options.willPop||function(){},o.didPop=o.options.didPop||function(){},o.contentElement,o.history=[];var n=o.loadView;return o.loadView=function(e){n.call(o,e,function(){o.contentElement=o.getContentElement();var e=o.getTopViewController();e&&o.push(WebApp.createViewController(e))})},o.getContentElement=function(){return o.element.querySelector("view")},o.getTopViewController=function(){var e=o.element.querySelector("view").getAttribute("top");return o.contentElement.removeAttribute("top"),e},o.push=function(e){e.navigationViewController=o,o.willPush(e),o.willChangeTop(),e.willAppear(),o.history.push(e);var n=document.createElement("div");e.loadView(n,function(){o.contentElement.appendChild(n),o.didPush(e),o.didChangeTop(),e.didAppear()})},o.pop=function(){var e=o.top();if(e){o.willPop(e),o.willChangeTop(),o.history.pop();var n=o.top();n&&n.willAppear(),o.didPop(e),o.didChangeTop(),n&&n.didAppear(),setTimeout(function(){e.willUnload(),e.element.remove(),e.didUnload()},o.timeBeforeUnloadingView)}},o.top=function(){return 0!==o.history.length?o.history[o.history.length-1]:void 0},o},WebApp.makeModalViewController=function(e,o){return o=WebApp.makeViewController(e,o),o.open=o.options.open||function(){},o.close=o.options.close||function(){},o.willOpen=o.options.willOpen||function(){},o.didOpen=o.options.didOpen||function(){},o.willClose=o.options.willClose||function(){},o.didClose=o.options.didClose||function(){},o},WebApp.makePopupViewController=function(e,o){return o=WebApp.makeViewController(e,o),o.parentViewController=void 0,o.openIn=o.options.openIn||function(e){o.parentViewController=e,o.willOpen(),o.didOpen()},o.close=o.options.close||function(){o.willClose(),o.didClose()},o.willOpen=o.options.willOpen||function(){},o.didOpen=o.options.didOpen||function(){},o.willClose=o.options.willClose||function(){},o.didClose=o.options.didClose||function(){},o},WebApp.loadTemplate=function(e){return{into:function(o,n){var t=new XMLHttpRequest;t.onload=function(){o.innerHTML=this.responseText,n&&n()},t.open("get",e,!0),t.send()}}},HTMLElement.prototype.forEach=function(e,o){var n=this.querySelectorAll(e);Array.prototype.slice.call(n).forEach(o)};