"use strict";$(function(){var e=$("body").attr("app");$("body").removeAttr("app");var o=WebApp.apps[e].constructor,t=new o(WebApp.apps[e].options);WebApp.app=t,t.launch()});var WebApp={app:void 0,apps:{},viewControllers:{}};WebApp.registerApp=function(e,o,t){this.apps[e]={constructor:o,options:t}},WebApp.registerViewController=function(e,o,t){this.viewControllers[e]={constructor:o,options:t}},WebApp.createViewController=function(e,o){if(this.viewControllers[e]){var t={};for(var n in this.viewControllers[e].options)t[n]=this.viewControllers[e].options[n];for(var n in o)t[n]=o[n];return new this.viewControllers[e].constructor(t)}},WebApp.Application=function(e){var o=this;e=e||{};var t;o.willLaunch=e.willLaunch||function(){},o.didLaunch=e.didLaunch||function(){},o.launch=function(){o.willLaunch(),o.setRootViewController(e.rootViewController&&WebApp.viewControllers[e.rootViewController]?WebApp.createViewController(e.rootViewController):new ViewController),o.didLaunch()},o.setRootViewController=function(e){t&&t.unloadView(),t=e,e&&e.willAppear(),e.loadView($("body"),function(){e&&e.didAppear()})}},WebApp.ViewController=function(e){var o=this;o.options=e||{},o.willLoad=o.options.willLoad||function(){},o.didLoad=o.options.didLoad||function(){},o.willAppear=o.options.willAppear||function(){},o.didAppear=o.options.didAppear||function(){},o.willUnload=o.options.willUnload||function(){},o.didUnload=o.options.didUnload||function(){},o.element=void 0,o.uiElements={}},WebApp.ViewController.prototype.loadView=function(e,o){var t=this;t.element=e,t.willLoad(),t.options.template?t.element.load(t.options.template,function(){$("*[id]",t.element).each(function(){t.uiElements[$(this).attr("id")]=$(this)}),o&&o(),t.didLoad()}):t.didLoad()},WebApp.ViewController.prototype.unloadView=function(e){var o=this;o.willUnload(),o.element.remove(),e&&e(),o.didUnload()},WebApp.TabsViewController=function(e){var o=this;WebApp.ViewController.prototype.constructor.call(o,e),o.willSelect=e.willSelect||function(){},o.didSelect=e.didSelect||function(){},o.contentElement=void 0,o.tabs=[],o.selected=-1},WebApp.TabsViewController.prototype=new WebApp.ViewController,WebApp.TabsViewController.constructor=WebApp.TabsViewController,WebApp.TabsViewController.prototype.loadView=function(e){var o=this;WebApp.ViewController.prototype.loadView.call(o,e,function(){o.contentElement=$("view",o.element),o.contentElement=o.contentElement.length>0?o.contentElement:$(o.contentElement[0]),$("tabs tab",o.element).each(function(){o.tabs.push({label:$(this).attr("label"),icon:$(this).attr("icon"),viewController:WebApp.createViewController($(this).attr("root")),container:$("<div>"),isLoaded:!1})}),$("tabs",o.element).remove()})},WebApp.TabsViewController.prototype.select=function(e){var o=this;0>e&&e>=o.tabs.length&&e!=o.selected||(o.willSelect(e),o.tabs[e].isLoaded||(o.contentElement.append(o.tabs[e].container),o.tabs[e].viewController.loadView(o.tabs[e].container),o.tabs[e].isLoaded=!0),o.selected>=0&&(o.tabs[o.selected].container.hide(),o.tabs[e].viewController.willAppear(),o.tabs[e].container.show(),o.tabs[e].viewController.didAppear()),o.selected=e,o.didSelect(e))},WebApp.NavigationViewController=function(e){var o=this;WebApp.ViewController.prototype.constructor.call(o,e),o.willChangeTop=e.willChangeTop||function(){},o.didChangeTop=e.didChangeTop||function(){},o.willPush=e.willPush||function(){},o.didPush=e.didPush||function(){},o.willPop=e.willPop||function(){},o.didPop=e.didPop||function(){},o.contentElement,o.history=[]},WebApp.NavigationViewController.prototype=new WebApp.ViewController,WebApp.NavigationViewController.constructor=WebApp.NavigationViewController,WebApp.NavigationViewController.prototype.loadView=function(e){var o=this;WebApp.ViewController.prototype.loadView.call(o,e,function(){o.contentElement=$("view",o.element),o.contentElement=o.contentElement.length>0?o.contentElement:$(o.contentElement[0]);var e=o.contentElement.attr("top");e&&o.push(WebApp.createViewController(e)),o.contentElement.removeAttr("top")})},WebApp.NavigationViewController.prototype.push=function(e){var o=this;e.navigationViewController=o,o.willPush(e),o.willChangeTop(),e.willAppear(),o.history.push(e);var t=$("<div>");e.loadView(t,function(){t.appendTo(o.contentElement),o.didPush(e),o.didChangeTop(),e.didAppear()})},WebApp.NavigationViewController.prototype.pop=function(){var e=this,o=e.top();if(o){e.willPop(o),e.willChangeTop(),e.history.pop();var t=e.top();t&&t.willAppear(),e.didPop(o),e.didChangeTop(),t&&t.didAppear(),setTimeout(function(){o.willUnload(),o.element.remove(),o.didUnload()},5e3)}},WebApp.NavigationViewController.prototype.top=function(){var e=this;if(0!==e.history.length)return e.history[e.history.length-1]},WebApp.ModalViewController=function(e){var o=this;o.open=e.open||function(){},o.close=e.close||function(){},o.willOpen=e.willOpen||function(){},o.didOpen=e.didOpen||function(){},o.willClose=e.willClose||function(){},o.didClose=e.didClose||function(){},WebApp.ViewController.prototype.constructor.call(o,e)},WebApp.ModalViewController.prototype=new WebApp.ViewController,WebApp.ModalViewController.constructor=WebApp.ModalViewController;