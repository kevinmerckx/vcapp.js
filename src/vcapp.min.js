"use strict";document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("body").getAttribute("app");document.querySelector("body").removeAttribute("app");var o=WebApp.apps[e].constructor,t=new o(WebApp.apps[e].options);WebApp.app=t,t.launch()});var WebApp={app:void 0,apps:{},viewControllers:{}};WebApp.registerApp=function(e,o,t){this.apps[e]={constructor:o,options:t}},WebApp.registerViewController=function(e,o,t){this.viewControllers[e]={constructor:o,options:t}},WebApp.createViewController=function(e,o){if(this.viewControllers[e]){var t={};for(var n in this.viewControllers[e].options)t[n]=this.viewControllers[e].options[n];for(var n in o)t[n]=o[n];return new this.viewControllers[e].constructor(t)}},WebApp.Application=function(e){var o=this;e=e||{};var t;o.willLaunch=e.willLaunch||function(){},o.didLaunch=e.didLaunch||function(){},o.launch=function(){o.willLaunch(),o.setRootViewController(e.rootViewController&&WebApp.viewControllers[e.rootViewController]?WebApp.createViewController(e.rootViewController):new WebApp.ViewController),o.didLaunch()},o.getRootViewController=function(){return t},o.setRootViewController=function(e){t&&t.unloadView(),t=e,e&&e.willAppear(),e.loadView(document.querySelector("body"),function(){e&&e.didAppear()})}},WebApp.ViewController=function(e){var o=this;o.options=e||{},o.willLoad=o.options.willLoad||function(){},o.didLoad=o.options.didLoad||function(){},o.willAppear=o.options.willAppear||function(){},o.didAppear=o.options.didAppear||function(){},o.willUnload=o.options.willUnload||function(){},o.didUnload=o.options.didUnload||function(){},o.element=void 0,o.uiElements={},this.loadView=function(e,o){var t=this;t.element=e,t.willLoad(),t.options.template?WebApp.loadTemplate(t.options.template).into(t.element,function(){Array.prototype.slice.call(t.element.querySelectorAll("*[id]")).forEach(function(e){t.uiElements[e.getAttribute("id")]=e}),o&&o(),t.didLoad()}):t.didLoad()},this.unloadView=function(e){var o=this;o.willUnload(),o.element.remove(),e&&e(),o.didUnload()}},WebApp.TabsViewController=function(e){var o=this;WebApp.TabsViewController.prototype.constructor.call(o,e),o.willSelect=e.willSelect||function(){},o.didSelect=e.didSelect||function(){},o.willUnselect=e.willUnselect||function(){},o.didUnselect=e.didUnselect||function(){},o.contentElement=void 0,o.tabs=[],o.selected=-1,o.loadView=function(e){var o=this;WebApp.TabsViewController.prototype.loadView.call(o,e,function(){o.contentElement=o.element.querySelector("view"),o.element.forEach("tabs tab",function(e){o.tabs.push({label:e.getAttribute("label"),icon:e.getAttribute("icon"),viewController:WebApp.createViewController(e.getAttribute("root")),container:document.createElement("div"),isLoaded:!1})}),o.element.forEach("tabs",function(e){e.remove()})})},o.select=function(e){var o=this;0>e&&e>=o.tabs.length&&e!=o.selected||(o.selected>=0&&o.willUnselect(o.selected),o.willSelect(e),o.tabs[e].viewController.willAppear(),o.tabs[e].isLoaded||(o.contentElement.appendChild(o.tabs[e].container),o.tabs[e].viewController.loadView(o.tabs[e].container),o.tabs[e].isLoaded=!0),o.selected>=0&&o.didUnselect(o.selected),o.selected=e,o.didSelect(e),o.tabs[e].viewController.didAppear())}},WebApp.TabsViewController.prototype=new WebApp.ViewController,WebApp.NavigationViewController=function(e){var o=this;WebApp.NavigationViewController.prototype.constructor.call(o,e),o.timeBeforeUnloadingView=o.options.timeBeforeUnloadingView||100,o.willChangeTop=o.options.willChangeTop||function(){},o.didChangeTop=o.options.didChangeTop||function(){},o.willPush=o.options.willPush||function(){},o.didPush=o.options.didPush||function(){},o.willPop=o.options.willPop||function(){},o.didPop=o.options.didPop||function(){},o.contentElement,o.history=[],o.loadView=function(e){var o=this;WebApp.NavigationViewController.prototype.loadView.call(o,e,function(){o.contentElement=o.element.querySelector("view");var e=o.contentElement.getAttribute("top");e&&o.push(WebApp.createViewController(e)),o.contentElement.removeAttribute("top")})},o.push=function(e){var o=this;e.navigationViewController=o,o.willPush(e),o.willChangeTop(),e.willAppear(),o.history.push(e);var t=document.createElement("div");e.loadView(t,function(){o.contentElement.appendChild(t),o.didPush(e),o.didChangeTop(),e.didAppear()})},o.pop=function(){var e=this,o=e.top();if(o){e.willPop(o),e.willChangeTop(),e.history.pop();var t=e.top();t&&t.willAppear(),e.didPop(o),e.didChangeTop(),t&&t.didAppear(),setTimeout(function(){o.willUnload(),o.element.remove(),o.didUnload()},e.timeBeforeUnloadingView)}},o.top=function(){var e=this;if(0!==e.history.length)return e.history[e.history.length-1]}},WebApp.NavigationViewController.prototype=new WebApp.ViewController,WebApp.ModalViewController=function(e){var o=this;WebApp.ModalViewController.prototype.constructor.call(o,e),o.open=e.open||function(){},o.close=e.close||function(){},o.willOpen=e.willOpen||function(){},o.didOpen=e.didOpen||function(){},o.willClose=e.willClose||function(){},o.didClose=e.didClose||function(){}},WebApp.ModalViewController.prototype=new WebApp.ViewController,WebApp.loadTemplate=function(e){return{into:function(o,t){var n=new XMLHttpRequest;n.onload=function(){o.innerHTML=this.responseText,t&&t()},n.open("get",e,!0),n.send()}}},HTMLElement.prototype.forEach=function(e,o){var t=this.querySelectorAll(e);Array.prototype.slice.call(t).forEach(o)};