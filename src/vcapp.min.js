"use strict";document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("body").getAttribute("app");document.querySelector("body").removeAttribute("app");var t=WebApp.apps[e].constructor,o=new t(WebApp.apps[e].options);WebApp.app=o,o.launch()});var WebApp={app:void 0,apps:{},viewControllers:{}};WebApp.registerApp=function(e,t,o){this.apps[e]={constructor:t,options:o}},WebApp.registerViewController=function(e,t,o){this.viewControllers[e]={constructor:t,options:o}},WebApp.createViewController=function(e,t){if(this.viewControllers[e]){var o={};for(var n in this.viewControllers[e].options)o[n]=this.viewControllers[e].options[n];for(var n in t)o[n]=t[n];return new this.viewControllers[e].constructor(o)}},WebApp.Application=function(e){var t=this;e=e||{};var o;t.willLaunch=e.willLaunch||function(){},t.didLaunch=e.didLaunch||function(){},t.launch=function(){t.willLaunch(),t.setRootViewController(e.rootViewController&&WebApp.viewControllers[e.rootViewController]?WebApp.createViewController(e.rootViewController):new WebApp.ViewController),t.didLaunch()},t.getRootViewController=function(){return o},t.setRootViewController=function(e){o&&o.unloadView(),o=e,e&&e.willAppear(),e.loadView(document.querySelector("body"),function(){e&&e.didAppear()})}},WebApp.ViewController=function(e){var t=this;t.options=e||{},t.willLoad=t.options.willLoad||function(){},t.didLoad=t.options.didLoad||function(){},t.willAppear=t.options.willAppear||function(){},t.didAppear=t.options.didAppear||function(){},t.willUnload=t.options.willUnload||function(){},t.didUnload=t.options.didUnload||function(){},t.element=void 0,t.uiElements={},this.loadView=function(e,t){var o=this;o.element=e,o.willLoad(),o.options.template?WebApp.loadTemplate(o.options.template).into(o.element,function(){Array.prototype.slice.call(o.element.querySelectorAll("*[id]")).forEach(function(e){o.uiElements[e.getAttribute("id")]=e}),t&&t(),o.didLoad()}):o.didLoad()},this.unloadView=function(e){var t=this;t.willUnload(),t.element.remove(),e&&e(),t.didUnload()}},WebApp.TabsViewController=function(e){var t=this;WebApp.TabsViewController.prototype.constructor.call(t,e),t.willSelect=e.willSelect||function(){},t.didSelect=e.didSelect||function(){},t.willUnselect=e.willUnselect||function(){},t.didUnselect=e.didUnselect||function(){},t.contentElement=void 0,t.tabs=[],t.selected=-1,t.loadView=function(e){var t=this;WebApp.TabsViewController.prototype.loadView.call(t,e,function(){t.contentElement=t.element.querySelector("view"),t.element.forEach("tabs tab",function(e){t.tabs.push({label:e.getAttribute("label"),icon:e.getAttribute("icon"),viewController:WebApp.createViewController(e.getAttribute("root")),container:document.createElement("div"),isLoaded:!1})}),t.element.forEach("tabs",function(e){e.remove()})})},t.select=function(e){var t=this;0>e&&e>=t.tabs.length&&e!=t.selected||(t.selected>=0&&t.willUnselect(t.selected),t.willSelect(e),t.tabs[e].viewController.willAppear(),t.tabs[e].isLoaded||(t.contentElement.appendChild(t.tabs[e].container),t.tabs[e].viewController.loadView(t.tabs[e].container),t.tabs[e].isLoaded=!0),t.selected>=0&&t.didUnselect(t.selected),t.selected=e,t.didSelect(e),t.tabs[e].viewController.didAppear())}},WebApp.TabsViewController.prototype=new WebApp.ViewController,WebApp.NavigationViewController=function(e){var t=this;WebApp.NavigationViewController.prototype.constructor.call(t,e),t.timeBeforeUnloadingView=t.options.timeBeforeUnloadingView||100,t.willChangeTop=t.options.willChangeTop||function(){},t.didChangeTop=t.options.didChangeTop||function(){},t.willPush=t.options.willPush||function(){},t.didPush=t.options.didPush||function(){},t.willPop=t.options.willPop||function(){},t.didPop=t.options.didPop||function(){},t.contentElement,t.history=[],t.loadView=function(e){var t=this;WebApp.NavigationViewController.prototype.loadView.call(t,e,function(){t.contentElement=t.element.querySelector("view");var e=t.contentElement.getAttribute("top");e&&t.push(WebApp.createViewController(e)),t.contentElement.removeAttribute("top")})},t.push=function(e){var t=this;e.navigationViewController=t,t.willPush(e),t.willChangeTop(),e.willAppear(),t.history.push(e);var o=document.createElement("div");e.loadView(o,function(){t.contentElement.appendChild(o),t.didPush(e),t.didChangeTop(),e.didAppear()})},t.pop=function(){var e=this,t=e.top();if(t){e.willPop(t),e.willChangeTop(),e.history.pop();var o=e.top();o&&o.willAppear(),e.didPop(t),e.didChangeTop(),o&&o.didAppear(),setTimeout(function(){t.willUnload(),t.element.remove(),t.didUnload()},e.timeBeforeUnloadingView)}},t.top=function(){var e=this;if(0!==e.history.length)return e.history[e.history.length-1]}},WebApp.NavigationViewController.prototype=new WebApp.ViewController,WebApp.ModalViewController=function(e){var t=this;WebApp.ModalViewController.prototype.constructor.call(t,e),t.open=e.open||function(){},t.close=e.close||function(){},t.willOpen=e.willOpen||function(){},t.didOpen=e.didOpen||function(){},t.willClose=e.willClose||function(){},t.didClose=e.didClose||function(){}},WebApp.ModalViewController.prototype=new WebApp.ViewController,WebApp.PopupViewController=function(e){var t=this;WebApp.PopupViewController.prototype.constructor.call(t,e),t.parentViewController=void 0,t.openIn=e.openIn||function(e){t.parentViewController=e,t.willOpen(),t.didOpen()},t.close=e.close||function(){t.willClose(),t.didClose()},t.willOpen=e.willOpen||function(){},t.didOpen=e.didOpen||function(){},t.willClose=e.willClose||function(){},t.didClose=e.didClose||function(){}},WebApp.PopupViewController.prototype=new WebApp.ViewController,WebApp.loadTemplate=function(e){return{into:function(t,o){var n=new XMLHttpRequest;n.onload=function(){t.innerHTML=this.responseText,o&&o()},n.open("get",e,!0),n.send()}}},HTMLElement.prototype.forEach=function(e,t){var o=this.querySelectorAll(e);Array.prototype.slice.call(o).forEach(t)};