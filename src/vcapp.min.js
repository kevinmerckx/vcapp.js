"use strict";$(function(){var o=$("body").attr("app");$("body").removeAttr("app");var e=WebApp.apps[o].constructor,t=new e(WebApp.apps[o].options);WebApp.app=t,t.launch()});var WebApp={app:void 0,apps:{},viewControllers:{}};WebApp.registerApp=function(o,e,t){this.apps[o]={constructor:e,options:t}},WebApp.registerViewController=function(o,e,t){this.viewControllers[o]={constructor:e,options:t}},WebApp.createViewController=function(o,e){if(this.viewControllers[o]){var t={};for(var n in this.viewControllers[o].options)t[n]=this.viewControllers[o].options[n];for(var n in e)t[n]=e[n];return new this.viewControllers[o].constructor(t)}},WebApp.Application=function(o){var e=this;o=o||{};var t;e.willLaunch=o.willLaunch||function(){},e.didLaunch=o.didLaunch||function(){},e.launch=function(){e.willLaunch(),e.setRootViewController(o.rootViewController&&WebApp.viewControllers[o.rootViewController]?WebApp.createViewController(o.rootViewController):new ViewController),e.didLaunch()},e.setRootViewController=function(o){t=o,t&&t.willUnload(),$("body").empty(),t&&t.didUnload(),t.loadView($("body"))}},WebApp.ViewController=function(o){var e=this;e.options=o||{},e.willLoad=e.options.willLoad||function(){},e.didLoad=e.options.didLoad||function(){},e.willAppear=e.options.willAppear||function(){},e.didAppear=e.options.didAppear||function(){},e.willUnload=e.options.willUnload||function(){},e.didUnload=e.options.didUnload||function(){},e.element=void 0,e.uiElements={}},WebApp.ViewController.prototype.loadView=function(o,e){var t=this;t.element=o,t.willLoad(),t.options.template?t.element.load(t.options.template,function(){$("*[id]",t.element).each(function(){t.uiElements[$(this).attr("id")]=$(this)}),e&&e(),t.didLoad()}):t.didLoad()},WebApp.ViewController.prototype.unloadView=function(){var o=this;o.willUnload(),o.element.remove(),o.didUnload()},WebApp.TabsViewController=function(o){var e=this;WebApp.ViewController.prototype.constructor.call(e,o),e.willSelect=o.willSelect||function(){},e.didSelect=o.didSelect||function(){},e.contentElement=void 0,e.tabs=[],e.selected=-1},WebApp.TabsViewController.prototype=new WebApp.ViewController,WebApp.TabsViewController.constructor=WebApp.TabsViewController,WebApp.TabsViewController.prototype.loadView=function(o){var e=this;WebApp.ViewController.prototype.loadView.call(e,o,function(){e.contentElement=$("view",e.element),e.contentElement=e.contentElement.length>0?e.contentElement:$(e.contentElement[0]),$("tabs tab",e.element).each(function(){e.tabs.push({label:$(this).attr("label"),icon:$(this).attr("icon"),viewController:WebApp.createViewController($(this).attr("root")),container:$("<div>"),isLoaded:!1})}),$("tabs",e.element).remove()})},WebApp.TabsViewController.prototype.select=function(o){var e=this;0>o&&o>=e.tabs.length&&o!=e.selected||(e.willSelect(o),e.tabs[o].isLoaded||(e.contentElement.append(e.tabs[o].container),e.tabs[o].viewController.loadView(e.tabs[o].container),e.tabs[o].isLoaded=!0),e.selected>=0&&(e.tabs[e.selected].container.hide(),e.tabs[o].viewController.willAppear(),e.tabs[o].container.show(),e.tabs[o].viewController.didAppear()),e.selected=o,e.didSelect(o))},WebApp.NavigationViewController=function(o){var e=this;WebApp.ViewController.prototype.constructor.call(e,o),e.willChangeTop=o.willChangeTop||function(){},e.didChangeTop=o.didChangeTop||function(){},e.willPush=o.willPush||function(){},e.didPush=o.didPush||function(){},e.willPop=o.willPop||function(){},e.didPop=o.didPop||function(){},e.contentElement,e.history=[]},WebApp.NavigationViewController.prototype=new WebApp.ViewController,WebApp.NavigationViewController.constructor=WebApp.NavigationViewController,WebApp.NavigationViewController.prototype.loadView=function(o){var e=this;WebApp.ViewController.prototype.loadView.call(e,o,function(){e.contentElement=$("view",e.element),e.contentElement=e.contentElement.length>0?e.contentElement:$(e.contentElement[0]);var o=e.contentElement.attr("top");o&&e.push(WebApp.createViewController(o)),e.contentElement.removeAttr("top")})},WebApp.NavigationViewController.prototype.push=function(o){var e=this;e.willPush(o),e.willChangeTop(),e.history.push(o),o.navigationViewController=e;var t=$("<div>");t.appendTo(e.contentElement),o.loadView(t,function(){e.didChangeTop(),e.didPush(o)})},WebApp.NavigationViewController.prototype.pop=function(){var o=this,e=o.top();if(e){o.willPop(e),o.willChangeTop(),o.history.pop(),o.didPop(e),o.didChangeTop();var t=o.top();t&&t.willAppear(),t&&t.didAppear(),setTimeout(function(){e.willUnload(),e.element.remove(),e.didUnload()},5e3)}},WebApp.NavigationViewController.prototype.top=function(){var o=this;if(0!==o.history.length)return o.history[o.history.length-1]},WebApp.ModalViewController=function(o){var e=this;e.open=o.open||function(){},e.close=o.close||function(){},e.willOpen=o.willOpen||function(){},e.didOpen=o.didOpen||function(){},e.willClose=o.willClose||function(){},e.didClose=o.didClose||function(){},WebApp.ViewController.prototype.constructor.call(e,o)},WebApp.ModalViewController.prototype=new WebApp.ViewController,WebApp.ModalViewController.constructor=WebApp.ModalViewController;